# 使用指南

## 快速开始

### 1. 设置服务器

```bash
# 进入项目目录
cd F:\Project\BVB

# 重命名服务器配置文件
mv server-package.json package.json

# 安装依赖
npm install

# 启动服务器
npm start
```

### 2. 在Cocos Creator中设置项目

1. 打开Cocos Creator 3.8.4
2. 选择"打开项目"，导入BVB项目
3. 在资源管理器中找到`assets/Scenes/MainScene.scene`
4. 双击打开主场景

### 3. 设置场景组件

1. 选择Canvas节点
2. 在属性检查器中找到MainScene组件
3. 配置以下属性：
   - `ballPrefab`: 拖拽`assets/Prefabs/Ball.prefab`到此处
   - `gameArea`: 可以创建一个空节点作为游戏区域
   - 其他UI组件可以根据需要创建和配置

### 4. 创建小球预制体

1. 在场景中创建一个空节点，命名为"Ball"
2. 添加UITransform组件，设置大小为50x50
3. 添加Sprite组件，设置为圆形纹理
4. 添加Ball脚本组件
5. 将节点拖拽到Prefabs文件夹中创建预制体

### 5. 运行游戏

1. 确保服务器正在运行
2. 在Cocos Creator中点击"运行"按钮
3. 在浏览器中打开游戏
4. 点击"开始游戏"按钮
5. 等待其他玩家加入并准备
6. 游戏开始后使用WASD控制小球移动

## 配置参数

### 网络设置
- 服务器地址：默认为`ws://localhost:8080`
- 可在NetworkManager中修改服务器地址

### 帧同步设置
- 帧率：默认30FPS
- 缓冲帧数：默认3帧
- 可在FrameSyncManager中调整

### 游戏设置
- 最大玩家数：默认4人
- 游戏区域大小：800x600
- 小球移动速度：200像素/秒
- 可在GameManager中修改

## 测试多人游戏

1. 启动服务器
2. 在不同的浏览器标签页中打开游戏
3. 每个标签页代表一个玩家
4. 所有玩家点击"开始游戏"和"准备"
5. 游戏开始后可以看到多个小球

## 常见问题

### 连接失败
- 检查服务器是否启动
- 确认端口8080没有被占用
- 检查防火墙设置

### 小球不显示
- 确认Ball预制体设置正确
- 检查Sprite组件是否有纹理
- 确认UITransform大小设置

### 输入无响应
- 检查InputManager是否正确初始化
- 确认键盘事件监听是否正常
- 检查网络连接状态

### 帧同步问题
- 确认所有客户端帧率一致
- 检查网络延迟
- 调整缓冲帧数

## 扩展开发

### 添加新的输入类型
1. 在InputType枚举中添加新类型
2. 在InputManager中处理新输入
3. 在Ball组件中响应新输入

### 添加新的游戏对象
1. 创建新的组件脚本
2. 实现帧数据处理方法
3. 在GameManager中管理对象

### 修改网络协议
1. 在NetworkManager中添加新的消息类型
2. 在服务器端添加对应处理逻辑
3. 更新客户端处理代码

## 性能优化

1. 减少不必要的网络消息
2. 优化渲染性能
3. 使用对象池管理游戏对象
4. 压缩网络数据
5. 实现差值和预测算法